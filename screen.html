<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PDF Auto Flip</title>
<style>
  body {
    margin: 0;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  canvas {
    display: block;
    background: white;
  }
</style>
</head>
<body>
<canvas id="pdfCanvas"></canvas>

<!-- ✅ Correct way to load PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script>
window.addEventListener("load", async () => {
    // ✅ Make sure pdfjsLib is loaded before using it
    if (typeof pdfjsLib === "undefined") {
        alert("PDF.js failed to load!");
        return;
    }

    const url = "prez.pdf"; // <-- replace with your PDF path
    const canvas = document.getElementById("pdfCanvas");
    const ctx = canvas.getContext("2d");

    // ✅ Worker setup
    pdfjsLib.GlobalWorkerOptions.workerSrc =
        "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";

    let pdfDoc = await pdfjsLib.getDocument(url).promise;
    let pageNum = 1;
    let totalPages = pdfDoc.numPages;

    async function renderPage(num) {
        const page = await pdfDoc.getPage(num);
        const viewport = page.getViewport({ scale: 1.5 });
        canvas.width = viewport.width;
        canvas.height = viewport.height;
        await page.render({ canvasContext: ctx, viewport }).promise;
    }

    async function nextPage() {
        await renderPage(pageNum);
        pageNum++;
        if (pageNum > totalPages) {
            location.reload(); // restart when done
        } else {
            setTimeout(nextPage, 2000); // wait 2 sec before next page
        }
    }

    nextPage();
});
</script>
</body>
</html>
